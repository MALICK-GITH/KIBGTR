# ORACXPRED MÉTAPHORE - Configuration Vercel
version: 2

functions:
  api/index.py:
    runtime: python3.12
    maxDuration: 30

routes:
  - src: /api/(.*)
    dest: /api/index.py
  - src: /(.*)
    dest: /api/index.py

env:
  PYTHON_VERSION: "3.12"
  FLASK_ENV: production
  FLASK_DEBUG: "false"

# Configuration pour les variables d'environnement
# À définir dans le dashboard Vercel:
# GOOGLE_CLIENT_ID, GOOGLE_CLIENT_SECRET, APP_SECRET, DATABASE_URL, etc.

headers:
  - source: /api/(.*)
    headers:
      - key: Access-Control-Allow-Origin
        value: "{{env.FRONTEND_URL}}"
      - key: Access-Control-Allow-Methods
        value: "GET, POST, PUT, DELETE, OPTIONS"
      - key: Access-Control-Allow-Credentials
        value: "true"
      - key: Access-Control-Allow-Headers
        value: "Content-Type, Authorization"
